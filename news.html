<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Midtown Manhattan Weather</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: #121212;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        .weather-card {
            background: #1e1e1e;
            color: white;
            padding: 2.5rem;
            border-radius: 30px;
            width: 320px;
            text-align: center;
            box-shadow: 0 10px 50px rgba(0,0,0,0.5);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .location { font-weight: 300; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 2px; color: #aaa; }
        .temp { font-size: 4.5rem; font-weight: 700; margin: 0.5rem 0; }
        .description { font-size: 1.1rem; color: #4facfe; margin-bottom: 1.5rem; text-transform: capitalize; }

        #icon-container {
            width: 140px;
            height: 140px;
            margin: 0 auto;
        }

        #icon-container img { width: 100%; height: 100%; }

        .details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        .detail-item span { display: block; }
        .val { font-weight: 600; font-size: 1.1rem; }
        .lbl { font-size: 0.75rem; color: #777; margin-top: 4px; }
    </style>
</head>
<body>

<div class="weather-card">
    <div class="location">Midtown, NYC</div>
    <div id="icon-container">
        </div>
    <div class="temp" id="temp">--°</div>
    <div class="description" id="desc">Loading...</div>
    
    <div class="details">
        <div class="detail-item">
            <span class="val" id="humidity">--%</span>
            <span class="lbl">HUMIDITY</span>
        </div>
        <div class="detail-item">
            <span class="val" id="wind">-- mph</span>
            <span class="lbl">WIND</span>
        </div>
    </div>
</div>

<script>
    // 1. ADD YOUR KEY HERE
    const apiKey = '3705bab40a0bc21845733bbd24c752ba'; 
    const lat = 40.7549;
    const lon = -73.9840;

    async function updateWeather() {
        try {
            const res = await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&units=imperial&appid=${apiKey}`);
            const data = await res.json(); // Fixed the syntax error here
            
            document.getElementById('temp').innerText = `${Math.round(data.main.temp)}°`;
            document.getElementById('desc').innerText = data.weather[0].description;
            document.getElementById('humidity').innerText = `${data.main.humidity}%`;
            document.getElementById('wind').innerText = `${Math.round(data.wind.speed)} mph`;

            const iconCode = data.weather[0].icon;
            const iconContainer = document.getElementById('icon-container');
            
            // Reliable GitHub CDN for amCharts animated icons
            const baseUrl = "https://raw.githubusercontent.com/bramkragten/weather-card/master/icons/animated/";
            
            const mapping = {
                '01d': 'day.svg',
                '01n': 'night.svg',
                '02d': 'cloudy-day-1.svg',
                '02n': 'cloudy-night-1.svg',
                '03d': 'cloudy.svg',
                '03n': 'cloudy.svg',
                '04d': 'cloudy.svg',
                '04n': 'cloudy.svg',
                '09d': 'rainy-6.svg',
                '10d': 'rainy-1.svg',
                '11d': 'thunder.svg',
                '13d': 'snowy-6.svg',
                '50d': 'cloudy.svg'
            };

            const fileName = mapping[iconCode] || 'day.svg';
            iconContainer.innerHTML = `<img src="${baseUrl}${fileName}" alt="weather">`;

        } catch (err) {
            console.error(err);
            document.getElementById('desc').innerText = "Update API Key";
        }
    }

    updateWeather();
</script>
</body>
</html>